<div class="modal-backdrop" *ngIf="showRejectPopup">
    <div class="modal-box">

        <div class="modal-header">
            <h3>родроХрпБродро┐ рооро▒рпБродрпНродро▓рпН</h3>
            <button class="close-btn" (click)="closeReject()">├Ч</button>
        </div>

        <h4>{{ selectedSociety?.society_name }}</h4>

        <!-- UNOPPOSED MESSAGE -->
        <div class="annapost-box" *ngIf="selectedSociety?.election_status === 'UNOPPOSED'">
            тЬФя╕П роЗроЪрпНроЪроЩрпНроХродрпНродро┐ро▓рпН <b>роЕройрпНройрокрпНрокрпЛро╕рпНроЯрпН</b> родрпЗро░рпНродро▓рпН роироЯрпИрокрпЖро▒рпБроХро┐ро▒родрпБ
        </div>

        <!-- MEMBERS (HIDE CHECKBOX FOR UNOPPOSED) -->
        <div class="member-grid" *ngIf="selectedSociety?.election_status !== 'UNOPPOSED'">

            <div class="member-col" *ngFor="let type of ['sc_st','women','general']">

                <h5>
                    {{ type === 'sc_st' ? 'рок.родро┐./рок.роХрпБ'
                    : type === 'women' ? 'роороХро│ро┐ро░рпН' : 'рокрпКродрпБ' }}
                </h5>

                <div class="member-item" *ngFor="let m of getMembers(type)">
                    <span>{{ m.member_name }}</span>
                    <input type="checkbox" [(ngModel)]="m.checked" (change)="onCheckboxChange()" />
                </div>

            </div>
        </div>

        <div class="modal-footer">
            <button class="btn-grey" (click)="closeReject()">ро░родрпНродрпБ роЪрпЖропрпН</button>
            <button class="btn-blue" (click)="finalWithdraw()">роЪрооро░рпНрокрпНрокро┐роХрпНроХ</button>
        </div>

    </div>
</div>

<div class="modal-backdrop" *ngIf="showStopPopup">
    <div class="modal-box">

        <div class="modal-header">
            <h3>родрпЗро░рпНродро▓рпИ роиро┐ро▒рпБродрпНрод</h3>
            <button class="close-btn" (click)="closeStop()">├Ч</button>
        </div>

        <textarea [(ngModel)]="stopRemark" placeholder="родрпЗро░рпНродро▓рпН роиро┐ро▒рпБродрпНродроХрпН роХрпБро▒ро┐рокрпНрокрпБ"></textarea>

        <div class="modal-footer">
            <button class="btn-grey" (click)="closeStop()">ро░родрпНродрпБ роЪрпЖропрпН</button>
            <button class="btn-red" (click)="submitStop()">роЪрооро░рпНрокрпНрокро┐роХрпНроХ</button>
        </div>

    </div>
</div>





<div class="page-bg">

    <h2 class="form-title">рокроЯро┐ро╡роорпН 6</h2>

    <!-- ================= F1 & F2 ================= -->
    <div class="row">
        <div class="col">
            <label>рооро╛ро╡роЯрпНроЯ родрпЗро░рпНродро▓рпН роЕро▓рпБро╡ро▓ро░рпН / рооро╛ро╡роЯрпНроЯроорпН</label>
            <input class="input-box" [value]="district_name" readonly />
        </div>
        <div class="col">
            <label>рооро╛ро╡роЯрпНроЯ родрпЗро░рпНродро▓рпН роЕро▓рпБро╡ро▓ро░рпН / роЪро░роХроорпН</label>
            <input class="input-box" [value]="zone_name" readonly />
        </div>
    </div>

    <!-- ================= F3 ================= -->
    <label class="section-label">
        ро╡рпЗроЯрпНрокрпБрооройрпБ рокро░ро┐роЪрпАро▓ройрпИропро┐ро▓рпН родроХрпБродро┐ рокрпЖро▒рпНро▒ роЪроЩрпНроХроЩрпНроХро│рпН (F3)
    </label>

    <div class="table-box">
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th>роЪроЩрпНроХродрпНродро┐ройрпН рокрпЖропро░рпН</th>
                    <th>рок.родро┐./рок.роХрпБ</th>
                    <th>роороХро│ро┐ро░рпН</th>
                    <th>рокрпКродрпБ</th>
                    <th>роорпКродрпНродроорпН</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let s of f3Societies; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td>{{ s.society_name }}</td>
                    <td>{{ s.sc_st }}</td>
                    <td>{{ s.women }}</td>
                    <td>{{ s.general }}</td>
                    <td>{{ s.total }}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- ================= F4 ================= -->
    <label class="section-label">
        ро╡рпЗроЯрпНрокрпБрооройрпБ рокро░ро┐роЪрпАро▓ройрпИропро┐ройрпН рокрпЛродрпБ родро│рпНро│рпБрокроЯро┐ / роиро┐ро▒рпБродрпНродро▓рпН (F4)
    </label>

    <div class="table-box">
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th>роЪроЩрпНроХродрпНродро┐ройрпН рокрпЖропро░рпН</th>
                    <th>рок.родро┐./рок.роХрпБ</th>
                    <th>роороХро│ро┐ро░рпН</th>
                    <th>рокрпКродрпБ</th>
                    <th>роорпКродрпНродроорпН</th>
                    <th>роирпАроХрпНроХроорпН</th>
                    <th>родрпЗро░рпНродро▓рпИ роиро┐ро▒рпБродрпНрод</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let s of f4Societies; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td>{{ s.society_name }}</td>
                    <td>{{ s.sc_st }}</td>
                    <td>{{ s.women }}</td>
                    <td>{{ s.general }}</td>
                    <td>{{ s.total }}</td>
                    <td>
                        <button class="btn-blue" (click)="openRejectPopup(s)" [class.disabled]="s.rejectDone">
                            {{ s.rejectDone ? 'родро┐ро░рпБродрпНродроорпН роорпЗро▒рпНроХрпКро│рпНро│рокрпНрокроЯрпНроЯродрпБ' : 'родро┐ро░рпБродрпНродроорпН роорпЗро▒рпНроХрпКро│рпНро│' }}
                        </button>
                    </td>

                    <td>
                        <button class="btn-red" (click)="openStopPopup(s)" [class.disabled]="s.stopDone">
                            {{ s.stopDone ? 'родрпЗро░рпНродро▓рпН роиро┐ро▒рпБродрпНродрокрпНрокроЯрпНроЯродрпБ' : 'родрпЗро░рпНродро▓рпИ роиро┐ро▒рпБродрпНрод' }}
                        </button>
                    </td>

                </tr>
            </tbody>
        </table>
    </div>

    <!-- ================= F5 ================= -->
    <label class="section-label">
        роЗро▒рпБродро┐ ро╡рпЗроЯрпНрокро╛ро│ро░рпН рокроЯрпНроЯро┐ропро▓ро┐ройрпНрокроЯро┐ рокрпЛроЯрпНроЯро┐ропро┐ро▓рпНро▓ро╛род роЪроЩрпНроХроЩрпНроХро│рпН (F5)
    </label>

    <div class="table-box" *ngIf="f5List.length; else f5Empty">
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th>роЪроЩрпНроХродрпНродро┐ройрпН рокрпЖропро░рпН</th>
                    <th>рок.родро┐./рок.роХрпБ</th>
                    <th>роороХро│ро┐ро░рпН</th>
                    <th>рокрпКродрпБ</th>
                    <th>роорпКродрпНродроорпН</th>
                    <th>ро╡ро┐ро╡ро░роорпН</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let s of f5List; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td>{{ s.society_name }}</td>
                    <td>{{ s.sc_st }}</td>
                    <td>{{ s.women }}</td>
                    <td>{{ s.general }}</td>
                    <td>{{ s.final_counts?.total || s.total }}</td>
                    <td>
                        <button class="btn-blue" (click)="openViewPopup(s)">
                            рокро╛ро░рпНроХрпНроХ
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <ng-template #f5Empty>
        <div class="empty-box">роЪроЩрпНроХроЩрпНроХро│рпН роЗро▓рпНро▓рпИ</div>
    </ng-template>


    <!-- ================= F6 ================= -->
    <label class="section-label">
        родрпЗро░рпНродро▓ро┐ро▓рпН рокрпЛроЯрпНроЯро┐ропро┐роЯ роЗропро▓ро╛род роЪроЩрпНроХроЩрпНроХро│рпН (F6)
    </label>

    <div class="table-box" *ngIf="f6List.length; else f6Empty">
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th>роЪроЩрпНроХродрпНродро┐ройрпН рокрпЖропро░рпН</th>
                    <th>рок.родро┐./рок.роХрпБ</th>
                    <th>роороХро│ро┐ро░рпН</th>
                    <th>рокрпКродрпБ</th>
                    <th>роорпКродрпНродроорпН</th>
                    <th>ро╡ро┐ро╡ро░роорпН</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let s of f6List; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td>{{ s.society_name }}</td>
                    <td>{{ s.sc_st }}</td>
                    <td>{{ s.women }}</td>
                    <td>{{ s.general }}</td>
                    <td>{{ s.final_counts?.total || s.total }}</td>
                    <td>
                        <button class="btn-blue" (click)="openViewPopup(s)">
                            рокро╛ро░рпНроХрпНроХ
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <ng-template #f6Empty>
        <div class="empty-box">роЪроЩрпНроХроЩрпНроХро│рпН роЗро▓рпНро▓рпИ</div>
    </ng-template>

    <!-- ================= F7 ================= -->
    <label class="section-label">
        рокрпЛроЯрпНроЯро┐ропро┐роЯроХрпНроХрпВроЯро┐роп роЪроЩрпНроХроЩрпНроХро│рпН (F7)
    </label>

    <div class="table-box" *ngIf="f7List.length; else f7Empty">
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th>роЪроЩрпНроХродрпНродро┐ройрпН рокрпЖропро░рпН</th>
                    <th>рок.родро┐./рок.роХрпБ</th>
                    <th>роороХро│ро┐ро░рпН</th>
                    <th>рокрпКродрпБ</th>
                    <th>роорпКродрпНродроорпН</th>
                    <th>ро╡ро┐ро╡ро░роорпН</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let s of f7List; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td>{{ s.society_name }}</td>
                    <td>{{ s.sc_st }}</td>
                    <td>{{ s.women }}</td>
                    <td>{{ s.general }}</td>
                    <td>{{ s.final_counts?.total || s.total }}</td>
                    <td>
                        <button class="btn-blue" (click)="openViewPopup(s)">
                            рокро╛ро░рпНроХрпНроХ
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <ng-template #f7Empty>
        <div class="empty-box">роЪроЩрпНроХроЩрпНроХро│рпН роЗро▓рпНро▓рпИ</div>
    </ng-template>


    <!-- ================= VIEW POPUP (LAST) ================= -->
    <!-- ================= REJECT POPUP ================= -->
    <div class="modal-backdrop" *ngIf="showRejectPopup">
        <div class="modal-box">
            <div class="modal-header">
                <h3>родроХрпБродро┐ рооро▒рпБродрпНродро▓рпН</h3>
                <button class="close-btn" (click)="closeReject()">├Ч</button>
            </div>

            <h4>{{ selectedSociety?.society_name }}</h4>

            <div class="annapost-box" *ngIf="selectedSociety?.election_status === 'UNOPPOSED'">
                тЬФя╕П роЗроЪрпНроЪроЩрпНроХродрпНродро┐ро▓рпН <b>роЕройрпНройрокрпНрокрпЛро╕рпНроЯрпН</b> родрпЗро░рпНродро▓рпН роироЯрпИрокрпЖро▒рпБроХро┐ро▒родрпБ
            </div>

            <div class="member-grid" *ngIf="selectedSociety?.election_status !== 'UNOPPOSED'">
                <div class="member-col" *ngFor="let type of ['sc_st','women','general']">
                    <h5>
                        {{ type === 'sc_st' ? 'рок.родро┐./рок.роХрпБ' : type === 'women' ? 'роороХро│ро┐ро░рпН' : 'рокрпКродрпБ' }}
                    </h5>

                    <div class="member-item" *ngFor="let m of getMembers(type)">
                        <span>{{ m.member_name }}</span>
                        <input type="checkbox" [(ngModel)]="m.checked" (change)="onCheckboxChange()" />
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn-grey" (click)="closeReject()">ро░родрпНродрпБ роЪрпЖропрпН</button>
                <button class="btn-blue" (click)="finalWithdraw()">роЪрооро░рпНрокрпНрокро┐роХрпНроХ</button>
            </div>
        </div>
    </div>

    <!-- ================= STOP POPUP ================= -->
    <div class="modal-backdrop" *ngIf="showStopPopup">
        <div class="modal-box">
            <div class="modal-header">
                <h3>родрпЗро░рпНродро▓рпИ роиро┐ро▒рпБродрпНрод</h3>
                <button class="close-btn" (click)="closeStop()">├Ч</button>
            </div>

            <textarea [(ngModel)]="stopRemark" placeholder="родрпЗро░рпНродро▓рпН роиро┐ро▒рпБродрпНродроХрпН роХрпБро▒ро┐рокрпНрокрпБ"></textarea>

            <div class="modal-footer">
                <button class="btn-grey" (click)="closeStop()">ро░родрпНродрпБ роЪрпЖропрпН</button>
                <button class="btn-red" (click)="submitStop()">роЪрооро░рпНрокрпНрокро┐роХрпНроХ</button>
            </div>
        </div>
    </div>

    <!-- ================= PAGE =================
    <div class="page-bg">
        <h2 class="form-title">рокроЯро┐ро╡роорпН 6</h2>

        F1 & F2
        <div class="row">
            <div class="col">
                <label>рооро╛ро╡роЯрпНроЯ родрпЗро░рпНродро▓рпН роЕро▓рпБро╡ро▓ро░рпН / рооро╛ро╡роЯрпНроЯроорпН</label>
                <input class="input-box" [value]="district_name" readonly />
            </div>
            <div class="col">
                <label>рооро╛ро╡роЯрпНроЯ родрпЗро░рпНродро▓рпН роЕро▓рпБро╡ро▓ро░рпН / роЪро░роХроорпН</label>
                <input class="input-box" [value]="zone_name" readonly />
            </div>
        </div>

         F3 / F4 / F5 / F6 / F7 TABLES -->
    <!-- ЁЯСЙ (роЗроЩрпНроХрпБ роирпАроЩрпНроХ роХрпКроЯрпБродрпНрод tables роОро▓рпНро▓ро╛роорпН ъ╖╕ыМАыбЬ) -->
    <!-- </div> -->

    <!-- ================= VIEW POPUP ================= -->
    <div class="modal-backdrop" *ngIf="showViewPopup">
        <div class="modal-box">
            <div class="modal-header">
                <h3>{{ viewSociety?.society_name }}</h3>
                <button class="close-btn" (click)="closeViewPopup()">├Ч</button>
            </div>

            <div class="status-box">
                роЗроирпНрод роЪроЩрпНроХроорпН <b>{{ viewSociety?.election_status }}</b> роиро┐ро▓рпИропро┐ро▓рпН роЙро│рпНро│родрпБ
            </div>

            <div class="member-grid" *ngIf="viewSociety?.candidates?.length">
                <div class="member-col" *ngFor="let type of ['sc_st','women','general']">
                    <h5>
                        {{ type === 'sc_st' ? 'рок.родро┐./рок.роХрпБ' : type === 'women' ? 'роороХро│ро┐ро░рпН' : 'рокрпКродрпБ' }}
                    </h5>

                    <div class="member-item" *ngFor="let c of viewSociety.candidates | filterByCategory:type">
                        {{ c.member_name }}
                    </div>
                </div>
            </div>

            <div class="empty-box" *ngIf="!viewSociety?.candidates?.length">
                роЙро▒рпБрокрпНрокро┐ройро░рпН ро╡ро┐рокро░роорпН роЗро▓рпНро▓рпИ
            </div>
        </div>
    </div>

    <!-- ================= FINAL SUBMIT BAR ================= -->
    <!-- <div class="final-submit-bar">
        <button class="btn-blue" [disabled]="form6Submitted" (click)="submitForm6Final()">
            роЪрооро░рпНрокрпНрокро┐роХрпНроХ
        </button>
    </div> -->
    <!-- ================= FINAL SUBMIT BAR ================= -->
    <div class="final-submit-bar-right" *ngIf="!form6Submitted">
        <button class="btn-blue" (click)="submitForm6Final()">
            роЪрооро░рпНрокрпНрокро┐роХрпНроХ
        </button>
    </div>

    <!-- ================= FINAL SUCCESS POPUP ================= -->
    <div class="modal-backdrop" *ngIf="showFinalSubmitPopup">
        <div class="modal-box small">
            <div class="modal-header">
                <h3>Form 6</h3>
                <button class="close-btn" (click)="showFinalSubmitPopup=false">├Ч</button>
            </div>

            <div class="success-box">
                тЬФя╕П Form 6 ро╡рпЖро▒рпНро▒ро┐роХро░рооро╛роХ роЪрооро░рпНрокрпНрокро┐роХрпНроХрокрпНрокроЯрпНроЯродрпБ
            </div>

            <div class="modal-footer">
                <button class="btn-blue" (click)="showFinalSubmitPopup=false">
                    роЪро░ро┐
                </button>
            </div>
        </div>
    </div>