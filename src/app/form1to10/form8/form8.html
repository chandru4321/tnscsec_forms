<!-- Preview Popup -->
<div class="popup-overlay" *ngIf="showPreviewPopup">

    <div class="popup-container">

        <!-- Header -->
        <div class="popup-header">
            <h3>{{ selectedSociety?.society_name }}</h3>
            <span class="close-btn" (click)="closePreview()">тЬЦ</span>
        </div>

        <!-- Rural Count Table -->
        <div class="mini-table">
            <label class="mini-title">роЪроЩрпНроХродрпНродро┐ройрпН роОрогрпНрогро┐роХрпНроХрпИ</label>
            <table>
                <tr>
                    <th>рок.родро┐./рок.роХрпБ</th>
                    <th>роороХро│ро┐ро░рпН</th>
                    <th>рокрпКродрпБ</th>
                </tr>
                <tr>
                    <td>{{ selectedSociety?.rural?.sc_st }}</td>
                    <td>{{ selectedSociety?.rural?.women }}</td>
                    <td>{{ selectedSociety?.rural?.general }}</td>
                </tr>
            </table>
        </div>

        <!-- Member List Scroll -->
        <div class="member-scroll">

            <div class="member-grid">

                <!-- SC/ST -->
                <div class="member-col">
                    <h5>рок.родро┐./рок.роХрпБ</h5>
                    <div *ngFor="let m of getMembers('SC_ST')" class="member-box">
                        <label>
                            <input type="checkbox" (change)="onMemberToggle(m, 'SC_ST', $event)">
                            {{ m.member_name }} - xxxx xxxx {{ m.aadhar_no.slice(-4) }}
                        </label>
                    </div>
                </div>

                <!-- WOMEN -->
                <div class="member-col">
                    <h5>роороХро│ро┐ро░рпН</h5>
                    <div *ngFor="let m of getMembers('WOMEN')" class="member-box">
                        <label>
                            <input type="checkbox" (change)="onMemberToggle(m, 'WOMEN', $event)">
                            {{ m.member_name }} - xxxx xxxx {{ m.aadhar_no.slice(-4) }}
                        </label>
                    </div>
                </div>

                <!-- GENERAL -->
                <div class="member-col">
                    <h5>рокрпКродрпБ</h5>
                    <div *ngFor="let m of getMembers('GENERAL')" class="member-box">
                        <label>
                            <input type="checkbox" (change)="onMemberToggle(m, 'GENERAL', $event)">
                            {{ m.member_name }} - xxxx xxxx {{ m.aadhar_no.slice(-4) }}
                        </label>
                    </div>
                </div>

            </div>

        </div>

        <!-- Buttons Right -->
        <div class="popup-footer">
            <button class="btn-grey" (click)="closePreview()">ро░родрпНродрпБ роЪрпЖропрпН</button>
            <button class="btn-blue" (click)="submitPreview()">роЪрооро░рпНрокрпНрокро┐роХрпНроХ</button>
        </div>

    </div>
</div>

















































<div class="page-bg">

    <h2 class="form-title">рокроЯро┐ро╡роорпН 8</h2>

    <!-- District & Zone -->
    <div class="row">
        <div class="col">
            <label>рооро╛ро╡роЯрпНроЯ родрпЗро░рпНродро▓рпН роЕро▓рпБро╡ро▓ро░рпН / рооро╛ро╡роЯрпНроЯроорпН(F!)</label>
            <input class="input-box" [value]="district_name" readonly />
        </div>

        <div class="col">
            <label>рооро╛ро╡роЯрпНроЯ родрпЗро░рпНродро▓рпН роЕро▓рпБро╡ро▓ро░рпН / роЪро░роХроорпН(F2)</label>
            <input class="input-box" [value]="Zone_name" readonly />
        </div>
    </div>

    <h3 class="table-title">родрпЗро░рпНродро▓рпН роиро┐ро▒рпБродрпНродрокрпНрокроЯрпНроЯ роЪроЩрпНроХроЩрпНроХро│рпН(F3)</h3>

    <table class="custom-table" *ngIf="stoppedSocieties.length > 0">
        <thead>
            <tr>
                <th>роЪроЩрпНроХроЩрпНроХро│ро┐ройрпН рокрпЖропро░рпН</th>
                <th>роорпКродрпНрод ро╡ро╛роХрпНроХрпБрокрпНрокродро┐ро╡рпБ роОрогрпНрогро┐роХрпНроХрпИ</th>
                <th>роиро┐ро▒рпБродрпНродрокрпНрокроЯрпНроЯ ро╡ро┐родро┐ роОрогрпН</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let s of stoppedSocieties">
                <td>{{ s.society_name }}</td>
                <td>{{ s.casted_votes_count }}</td>
                <td>{{ s.polling_suspension_count }}</td>
            </tr>
        </tbody>
    </table>

    <div *ngIf="stoppedSocieties.length === 0">
        родро░ро╡рпБ роЗро▓рпНро▓рпИ
    </div>

    <label class="section-label">
        ро╡ро╛роХрпНроХрпБ роОрогрпНрогро┐роХрпНроХрпИ рокро▒рпНро▒ро┐роп ро╡ро┐рокро░роЩрпНроХро│рпН (F4)
    </label>

    <div class="f4-scroll-container">
        <table class="f4-table">
            <thead>
                <tr>
                    <th class="col-sno">ро╡.роОрогрпН</th>
                    <th class="col-name">
                        ро╡ро╛роХрпНроХрпБрокрпНрокродро┐ро╡рпБ роироЯрпИрокрпЖро▒рпНро▒<br>роЪроЩрпНроХроЩрпНроХро│ро┐ройрпН рокрпЖропро░рпН
                    </th>
                    <th class="col-total">роорпКродрпНрод рокродро┐ро╡ро╛рой ро╡ро╛роХрпНроХрпБроХро│рпН</th>
                    <th class="col-input">ро╡ро╛роХрпНроХрпБрокрпНрокрпЖроЯрпНроЯро┐ропро┐ро▓рпН роЗро░рпБроирпНрод ро╡ро╛роХрпНроХрпБроХро│рпН</th>
                    <th class="col-input">роЪрпЖро▓рпНро▓рпБрокроЯро┐ропро╛рой ро╡ро╛роХрпНроХрпБроХро│рпН</th>
                    <th class="col-input">роЪрпЖро▓рпНро▓рпБрокроЯро┐ропро╛роХро╛род ро╡ро╛роХрпНроХрпБроХро│рпН</th>
                    <th class="col-btn">ро╡ро╛роХрпНроХрпБ</th>
                    <th class="col-remark">роХрпБро▒ро┐рокрпНрокрпБроХро│рпН</th>
                </tr>
            </thead>

            <tbody>
                <tr *ngFor="let s of countingSocieties; let i = index">
                    <td>{{ i + 1 }}</td>

                    <td class="name-cell">
                        {{ s.society_name }}
                    </td>

                    <td>{{ s.casted_votes_count }}</td>

                    <td>
                        <input type="number" class="table-input" [(ngModel)]="s.ballot_box_votes">
                    </td>

                    <td>
                        <input type="number" class="table-input" [(ngModel)]="s.valid_votes">
                    </td>

                    <td>
                        <input type="number" class="table-input" [(ngModel)]="s.invalid_votes">
                    </td>

                    <td>
                        <button class="btn-blue" [disabled]="s.submitted" (click)="openPreviewPopup(s)">
                            {{ s.submitted ? 'Selected' : 'рокро╛ро░рпНроХрпНроХ' }}
                        </button>



                    </td>

                    <!-- ЁЯФе Larger remark field -->
                    <td>
                        <textarea class="remark-box" [(ngModel)]="s.remarks">
                    </textarea>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="form8-action-bar">
        <button class="btn-grey" (click)="onCancel()">ро░родрпНродрпБ роЪрпЖропрпН</button>
        <button class="btn-blue" (click)="onSubmitForm8()">роЪрооро░рпНрокрпНрокро┐роХрпНроХ</button>
    </div>